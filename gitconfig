[user]
    name = Benjamin Bolte
    email = ben@bolte.cc

[alias]
    sync = !git pull && git push
    so = log --oneline
    ss = log --graph --pretty=format:'%C(bold red)%h%Creset %C(bold magenta)%d %Creset%n%C(bold blue)%an%Creset %C(cyan)%s%Creset'
    sl = !git smartlog
    smartlog = log --graph --pretty=format:'commit: %C(bold red)%h%Creset %C(red)<%H>%Creset %C(bold magenta)%d %Creset%ndate: %C(bold yellow)%cd %Creset%C(yellow)%cr%Creset%nauthor: %C(bold blue)    %an%Creset %C(blue)<%ae>%Creset%n%C(cyan)%s%n%Creset'
    unstash = stash pop
    sb = status -sb
    st = status -uno
    br = checkout -b
    brm = "!f() { \
        if [[ $# -ne 1 ]]; then \
            echo 'Usage: git brm <name>'; \
        else \
            git checkout -b $1 master; \
        fi \
    }; f"
    bd = branch -d
    bD = branch -D
    bl = branch --list
    ci = commit
    co = checkout
    di = diff
    cp = cherry-pick
    wt = worktree
    uncommit = reset HEAD~1
    rh = reset --hard
    # Rebase onto master, taking all current changes
    rbm = rebase master -X ours
    # Pushes to upstream repo branch with the same name
    po = "!git push --set-upstream origin \"$(git rev-parse --abbrev-ref HEAD)\""
    # Force pulls from origin.
    fpull = "!f() { \
        if [[ `git status --porcelain` ]]; then \
            echo 'Found local changes; aborting' \
        else \
            branch=$(git rev-parse --abbrev-ref HEAD) \
            git fetch --all \
            git branch backup-${branch} \
            echo \"Created backup branch 'backup-${branch}'\" \
            git reset --hard origin/${branch} \
        fi \
    }"
    # Shows diff of last commit, or last N commits if provided
    last = "!f() { \
        if [[ $# -gt 0 ]]; then \
            n=$1; shift; \
            git diff HEAD~$n $@; \
        else \
            git diff HEAD^ $@; \
        fi }; f"
    # Prunes worktree, then removes branches with some prefix (default "auto")
    wt-clean = "!f() { \
        if [[ $# -gt 0 ]]; then \
            bp=$1; shift; \
        else \
            bp='auto/'; \
        fi; \
        git worktree prune; \
        git branch | grep $bp | xargs git branch -D; \
    }; f"
    change-commits = "!f() { \
        VAR=$1; OLD=$2; NEW=$3; shift 3; \
        git filter-branch --env-filter \"if [[ \\\"$`echo $VAR`\\\" = '$OLD' ]]; then export $VAR='$NEW'; fi\" $@; \
    }; f"

[core]
    excludesfile = ~/.gitignore_global

[pull]
    rebase = true

[push]
    default = matching

[fetch]
    prune = true

[diff]
    colorMoved = zebra

[rerere]
    enabled = true

[branch]
    autoSetupMerge = always

[filter "lfs"]
    clean = git-lfs clean -- %f
    smudge = git-lfs smudge -- %f
    process = git-lfs filter-process
    required = true

